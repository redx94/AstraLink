name: Deploy Open5GS To Fly.io

on:
  push:
    branches:
      - main
  jobs:
    deploy:
      runs-on: ubuntu-latest

      steps:
        - name: Checkout Repository
          uses: actions/checkout@v2
        - name: Install Flyctl
          run: curl -L https://fly.io/install.sh | sh
        - name: Automate Deployment
          run: |
            flyctl launch --auto-confirm --image open5gs/open5gs:latest
          env:
            FLY_APP_NAME: AstraLink_OPEN_5GS
            FLY_ENV_NAME: production